# Contributor: Slash <demodevil5 at yahoo dot com>
# Contributor: Nathan Owe <ndowens.aur at gmail dot com>
# Contributor: Christoph Zeiler <rabyte*gmail>

pkgname=ecm
pkgver=1.02
pkgrel=1
pkgdesc="Converts CD image files into a lossless format optimized for compression tools"
arch=('i686' 'x86_64' 'mips64el')
url="http://www.neillcorlett.com/ecm/"
license=('GPL3')
depends=('glibc')
provides=('unecm')
source=("http://www.neillcorlett.com/downloads/cmdpack-${pkgver}-src.tar.gz")
md5sums=('bb83fcac33b560f365fb3c2fc33b8480')

build() {
    cd ${srcdir}/cmdpack-${pkgver}-src/src/

    gcc -O9 -Wall -Wextra -Werror -fomit-frame-pointer "ecm.c" -s -o "ecm"
}

package() {
    cd ${srcdir}/cmdpack-${pkgver}-src/src/

    install -Dm755 ecm ${pkgdir}/usr/bin/ecm
    ln -s /usr/bin/ecm ${pkgdir}/usr/bin/unecm
}
