# Contributor: Slash <demodevil5[at]yahoo[dot]com>

pkgname=secondlife-bin
pkgver=1.23.4.123908
pkgrel=1
pkgdesc="Second Life is a 3-D virtual world entirely built and owned by its residents (Binary version)."
url="http://www.secondlife.com/"
license=('GPL')
depends=('alsa-lib' 'apr-util' 'freealut' 'gtk2' 'libgl' 'libidn' 'mesa' 'nss' 'sdl')
arch=('i686')
conflicts=('secondlife' 'secondlife-svn' 'secondlife-rc')
install=secondlife.install
source=('secondlife.desktop' 'secondlife.launcher' \
"http://download.cloud.secondlife.com/SecondLife-i686-${pkgver}.tar.bz2")
md5sums=('293a7758e43c54de247311e6521deab1'
         '067f489be9fd2280ce2e12ed94ea7950'
         '93cc510a01c116bc9d060ef1ef521d52')

build() {
    cd $srcdir;

    # Rename Data Directory
    mv SecondLife-i686-${pkgver}/ secondlife

    # Install Desktop File
    install -D -m644 $srcdir/secondlife.desktop \
        $pkgdir/usr/share/applications/secondlife.desktop

    # Install Icon File
    install -D -m644 $srcdir/secondlife/secondlife_icon.png \
        $pkgdir/usr/share/pixmaps/secondlife.png

    # Install Launcher
    install -D -m755 $srcdir/secondlife.launcher \
        $pkgdir/usr/bin/secondlife

    # Move Data to Destination Directory
    install -d $pkgdir/opt/
    mv secondlife/ $pkgdir/opt/

    # Change Permissions of files to root:games
    chown -R root:games $pkgdir/opt/secondlife
    chmod -R g+rw $pkgdir/opt/secondlife

    # Make Binary Group-Executable
    chmod g+x $pkgdir/opt/secondlife/secondlife
}
